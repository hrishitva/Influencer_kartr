{% extends "layout.html" %}

{% block content %}
<div class="social-agents-page">
    <div class="section-header">
        <h1 class="mb-4">Social Media Agents</h1>
        <p class="lead">Let AI-powered agents handle your social media presence for consistent engagement, 24/7 monitoring, and data-driven strategy.</p>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Why Use Social Media Agents?</h5>
            <div class="row mb-4">
                <div class="col-md-4 benefits-item">
                    <i class="fas fa-robot feature-icon"></i>
                    <h6>Consistent Engagement</h6>
                    <p>Our AI agents interact with your audience around the clock, responding to comments and messages without delay.</p>
                </div>
                <div class="col-md-4 benefits-item">
                    <i class="fas fa-chart-pie feature-icon"></i>
                    <h6>Data-Driven Content</h6>
                    <p>Generate and schedule content based on performance analytics and audience preferences.</p>
                </div>
                <div class="col-md-4 benefits-item">
                    <i class="fas fa-shield-alt feature-icon"></i>
                    <h6>Brand Protection</h6>
                    <p>Continuous monitoring for brand mentions and potential PR issues, with instant alerts when needed.</p>
                </div>
            </div>
        </div>
    </div>

    <h2 class="mb-4">Available Agent Solutions</h2>
    <div class="row">
        {% for agent in agents %}
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 agent-card">
                <div class="card-header">
                    <h5 class="card-title mb-0">{{ agent.name }}</h5>
                </div>
                <div class="card-body">
                    <div class="badge-container mb-3">
                        <span class="badge bg-primary">{{ agent.specialty }}</span>
                    </div>
                    <p class="card-text">{{ agent.description }}</p>
                    <h6 class="features-title">Key Features:</h6>
                    <ul class="features-list">
                        {% for feature in agent.features %}
                        <li><i class="fas fa-check-circle text-success me-2"></i>{{ feature }}</li>
                        {% endfor %}
                    </ul>
                    <div class="platforms-container">
                        <h6 class="platforms-title">Supported Platforms:</h6>
                        <div class="platforms-icons">
                            {% for platform in agent.supported_platforms %}
                            <span class="platform-badge">
                                {% if platform == "Instagram" %}
                                <i class="fab fa-instagram"></i>
                                {% elif platform == "Twitter" %}
                                <i class="fab fa-twitter"></i>
                                {% elif platform == "Facebook" %}
                                <i class="fab fa-facebook"></i>
                                {% elif platform == "LinkedIn" %}
                                <i class="fab fa-linkedin"></i>
                                {% elif platform == "TikTok" %}
                                <i class="fab fa-tiktok"></i>
                                {% elif platform == "Discord" %}
                                <i class="fab fa-discord"></i>
                                {% else %}
                                <i class="fas fa-globe"></i>
                                {% endif %}
                                {{ platform }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="pricing mb-3">
                        <span class="price">${{ '{:,}'.format(agent.monthly_rate) }}</span>
                        <span class="period">per month</span>
                    </div>
                    <button class="btn btn-primary w-100 subscribe-btn" data-agent-id="{{ agent.id }}">Subscribe Now</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="section-header mt-5">
        <h2 class="mb-4">How It Works</h2>
    </div>
    <div class="row mb-5">
        <div class="col-md-3">
            <div class="step-card">
                <div class="step-number">1</div>
                <h5>Choose Your Agent</h5>
                <p>Select the AI agent that best fits your social media management needs.</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="step-card">
                <div class="step-number">2</div>
                <h5>Connect Your Accounts</h5>
                <p>Link your social media accounts and provide brand guidelines.</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="step-card">
                <div class="step-number">3</div>
                <h5>Customize Settings</h5>
                <p>Define your preferences, tone, and response parameters.</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="step-card">
                <div class="step-number">4</div>
                <h5>Monitor Performance</h5>
                <p>Track engagement metrics and refine your strategy in real-time.</p>
            </div>
        </div>
    </div>

    <div class="faq-section mt-5">
        <h2 class="text-center mb-4">Frequently Asked Questions</h2>
        <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        How do social media agents differ from traditional management?
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Social media agents use AI to provide 24/7 management, real-time responses, and data-driven content creation. Unlike traditional management, which relies on human operators with limited hours, our agents can monitor and engage continuously, analyzing patterns to optimize your social presence.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Will the content still sound authentic?
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Absolutely. Our agents are trained on your brand voice and guidelines. They generate content that aligns with your identity while maintaining human-like engagement. You can set approval workflows for important content while letting the agent handle routine interactions.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Can I customize how the agent responds?
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Yes, you have full control over your agent's behavior. You can customize response templates, define tone guidelines, set approval thresholds for sensitive topics, and create automated rules for different types of engagement.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Modal for Subscription -->
    <div class="modal fade" id="subscriptionModal" tabindex="-1" aria-labelledby="subscriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="subscriptionModalLabel">Subscribe to Agent</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="subscriptionForm">
                        <input type="hidden" id="agentId" name="agentId">
                        <div class="mb-3">
                            <label for="planDuration" class="form-label">Subscription Duration</label>
                            <select class="form-select" id="planDuration" name="planDuration" required>
                                <option value="1">1 Month</option>
                                <option value="3">3 Months (10% discount)</option>
                                <option value="6">6 Months (15% discount)</option>
                                <option value="12">12 Months (20% discount)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Social Media Accounts to Manage</label>
                            <div class="d-flex flex-wrap">
                                <div class="form-check me-3 mb-2">
                                    <input class="form-check-input" type="checkbox" value="instagram" id="instagramAccount" name="socialAccounts">
                                    <label class="form-check-label" for="instagramAccount">Instagram</label>
                                </div>
                                <div class="form-check me-3 mb-2">
                                    <input class="form-check-input" type="checkbox" value="twitter" id="twitterAccount" name="socialAccounts">
                                    <label class="form-check-label" for="twitterAccount">Twitter</label>
                                </div>
                                <div class="form-check me-3 mb-2">
                                    <input class="form-check-input" type="checkbox" value="facebook" id="facebookAccount" name="socialAccounts">
                                    <label class="form-check-label" for="facebookAccount">Facebook</label>
                                </div>
                                <div class="form-check me-3 mb-2">
                                    <input class="form-check-input" type="checkbox" value="linkedin" id="linkedinAccount" name="socialAccounts">
                                    <label class="form-check-label" for="linkedinAccount">LinkedIn</label>
                                </div>
                                <div class="form-check me-3 mb-2">
                                    <input class="form-check-input" type="checkbox" value="tiktok" id="tiktokAccount" name="socialAccounts">
                                    <label class="form-check-label" for="tiktokAccount">TikTok</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="accountDetails" class="form-label">Account Details</label>
                            <textarea class="form-control" id="accountDetails" name="accountDetails" rows="3" placeholder="Please provide details about your social media accounts (handles, audience size, etc.)"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="brandGuidelines" class="form-label">Brand Guidelines</label>
                            <textarea class="form-control" id="brandGuidelines" name="brandGuidelines" rows="3" placeholder="Describe your brand voice, tone, and any specific guidelines for your social media presence"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <div class="pricing-summary me-auto">
                        <span>Monthly: $<span id="monthlyPrice">0</span></span>
                        <span class="ms-3">Total: $<span id="totalSubscriptionPrice">0</span></span>
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmSubscription">Subscribe</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .social-agents-page {
        padding: 2rem 0;
    }
    
    .section-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .feature-icon {
        font-size: 2.5rem;
        color: #4e73df;
        margin-bottom: 1rem;
    }
    
    .benefits-item {
        text-align: center;
        padding: 1rem;
    }
    
    .agent-card {
        transition: transform 0.3s ease;
        border-radius: 10px;
        overflow: hidden;
    }
    
    .agent-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .agent-card .card-header {
        background-color: #4e73df;
        color: white;
        font-weight: bold;
        text-align: center;
    }
    
    .features-title, .platforms-title {
        font-weight: bold;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    
    .features-list {
        list-style-type: none;
        padding-left: 0;
    }
    
    .platforms-icons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .platform-badge {
        background-color: #f8f9fa;
        color: #495057;
        padding: 0.25rem 0.5rem;
        border-radius: 50px;
        font-size: 0.75rem;
        display: inline-flex;
        align-items: center;
    }
    
    .platform-badge i {
        margin-right: 0.25rem;
    }
    
    .pricing {
        display: flex;
        align-items: baseline;
        justify-content: center;
    }
    
    .price {
        font-size: 1.5rem;
        font-weight: bold;
        color: #4e73df;
    }
    
    .period {
        font-size: 0.875rem;
        margin-left: 0.5rem;
        color: #6c757d;
    }
    
    .badge-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .step-card {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        height: 100%;
        position: relative;
    }
    
    .step-number {
        background-color: #4e73df;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin: 0 auto 1rem;
    }
    
    .faq-section {
        max-width: 800px;
        margin: 0 auto;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Subscribe button event handlers
        const subscribeButtons = document.querySelectorAll('.subscribe-btn');
        const subscriptionModal = new bootstrap.Modal(document.getElementById('subscriptionModal'));
        const agents = {{ agents|tojson }};
        let currentAgent = null;
        
        subscribeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const agentId = this.getAttribute('data-agent-id');
                document.getElementById('agentId').value = agentId;
                
                // Find the agent in our data
                currentAgent = agents.find(a => a.id === agentId);
                if (currentAgent) {
                    document.getElementById('subscriptionModalLabel').textContent = `Subscribe to ${currentAgent.name}`;
                    updatePricing(currentAgent.monthly_rate, 1); // Default 1 month
                }
                
                subscriptionModal.show();
            });
        });
        
        // Duration change event handler
        document.getElementById('planDuration').addEventListener('change', function() {
            if (currentAgent) {
                updatePricing(currentAgent.monthly_rate, parseInt(this.value));
            }
        });
        
        function updatePricing(monthlyRate, months) {
            let discount = 0;
            if (months === 3) discount = 0.1;
            else if (months === 6) discount = 0.15;
            else if (months === 12) discount = 0.2;
            
            const discountedRate = monthlyRate * (1 - discount);
            const totalPrice = discountedRate * months;
            
            document.getElementById('monthlyPrice').textContent = discountedRate.toLocaleString();
            document.getElementById('totalSubscriptionPrice').textContent = totalPrice.toLocaleString();
        }
        
        // Form submission
        document.getElementById('confirmSubscription').addEventListener('click', function() {
            const form = document.getElementById('subscriptionForm');
            if (form.checkValidity()) {
                // In a real application, you would submit this to the server
                alert('Subscription confirmed! Our team will contact you shortly to complete setup.');
                subscriptionModal.hide();
            } else {
                form.reportValidity();
            }
        });
    });
</script>
{% endblock %}